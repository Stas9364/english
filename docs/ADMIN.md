# Руководство администратора

Как пользоваться приложением English Quizzes в роли администратора: вход, создание и редактирование тестов.

---

## 1. Доступ в админку

### Кто может заходить

В админ-панель могут войти только пользователи, чей **email добавлен в таблицу `admin_emails`** в Supabase.

- Добавление email делается вручную в **Supabase Dashboard** → **Table Editor** → таблица **admin_emails** → **Insert row** (или через SQL: `insert into public.admin_emails (email) values ('ваш@gmail.com');`).
- Используйте тот же Google-аккаунт (тот же email), которым вы будете входить на сайт.

### Как войти

1. Откройте сайт (например, http://localhost:3000).
2. В правом верхнем углу нажмите **Sign in**.
3. Выберите **Sign in with Google** и войдите под аккаунтом, чей email есть в `admin_emails`.
4. После входа в навбаре появится ссылка **Admin** — нажмите её или перейдите по адресу `/admin`.

Если ваш email не в списке админов, при переходе на `/admin` вы увидите сообщение **«Access denied»**.

---

## 2. Страница админки (`/admin`)

На странице два блока:

### Блок «Your quizzes» (список тестов)

- Показаны **все тесты**: название и описание.
- У каждого теста:
  - **View** — открывает страницу прохождения теста в новой вкладке (как для обычного пользователя).
  - **Иконка карандаша** — переход к **редактированию** этого теста (страница `/admin/quiz/[id]`).

Если тестов ещё нет, отображается текст «No quizzes yet. Create one below.»

### Блок «Create quiz» (создание теста)

Форма для добавления нового теста.

---

## 3. Создание нового теста

1. Заполните поле **Quiz title** (обязательно) — например, «Present Simple».
2. При желании заполните **Description (optional)** — краткое описание теста.
3. Добавьте хотя бы один вопрос:
   - Нажмите **Add question** для нового вопроса.
   - В каждом вопросе:
     - **Question text** — текст вопроса (обязательно).
     - **Explanation (optional)** — пояснение, которое пользователь увидит после проверки ответа.
     - **Options** — варианты ответов:
       - Введите текст варианта в поле.
       - Отметьте чекбокс **Correct** у одного или нескольких правильных вариантов.
       - Кнопка **Add option** — добавить вариант, иконка корзины — удалить вариант.
   - У каждого вопроса должен быть минимум один вариант; можно удалить лишний вопрос кнопкой с иконкой корзины рядом с заголовком вопроса.
4. Нажмите **Create quiz**.

После успешного сохранения появится сообщение «Quiz created successfully», форма очистится, а новый тест появится в списке «Your quizzes» и на главной странице сайта.

---

## 4. Редактирование теста

1. На странице `/admin` в блоке «Your quizzes» нажмите **иконку карандаша** у нужного теста.
2. Откроется страница редактирования (`/admin/quiz/[id]`) с формой, заполненной текущими данными теста.
3. Можно менять:
   - **Quiz title** и **Description**.
   - Текст и **Explanation** у каждого вопроса.
   - Текст вариантов и отметку **Correct**.
4. Дополнительно:
   - **Add question** — добавить новый вопрос.
   - **Add option** — добавить вариант к выбранному вопросу.
   - Иконки корзины — удалить вопрос или вариант (вопросов должно остаться хотя бы один, вариантов в вопросе — тоже хотя бы один).
5. Нажмите **Save changes**.

После успешного сохранения появится сообщение «Quiz updated successfully». Кнопки **View quiz** и **Back to admin** ведут на страницу прохождения теста и обратно в список админки.

---

## 5. Полезные ссылки

- **Back to quizzes** (в шапке админки или на странице редактирования) — возврат на главную страницу сайта со списком тестов.
- **View** / **View quiz** — открыть тест так, как его видит пользователь (прохождение с выбором ответов и проверкой).

---

## 6. Если что-то пошло не так

- **«Access denied»** — ваш email не добавлен в `admin_emails` в Supabase. Добавьте его в таблицу и войдите снова под этим аккаунтом.
- **Ошибка при сохранении теста** — проверьте, что все обязательные поля заполнены (название теста, текст каждого вопроса, минимум один вариант у каждого вопроса и хотя бы один вариант отмечен как правильный, если это нужно по логике теста).
- **Не вижу ссылку Admin в навбаре** — убедитесь, что вы вошли под аккаунтом из `admin_emails` и что страница обновилась после входа.
